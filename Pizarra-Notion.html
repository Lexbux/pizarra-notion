<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Pizarra interactiva</title>
<style>
  body { margin:0; font-family: Arial, sans-serif; background: #f0f0f0; }
  #toolbar {
    background: #222; color: white; padding: 10px;
    display: flex; gap: 10px; align-items: center;
  }
  button, input[type=color], input[type=text] {
    padding: 5px 10px; border:none; border-radius:4px;
    font-size: 14px;
  }
  button { cursor:pointer; background:#444; color:#fff; }
  button:hover { background:#666; }
  #canvas {
    background: white;
    display: block;
    margin: 10px auto;
    border: 1px solid #999;
    touch-action: none;
  }
  #gifInput {
    width: 200px;
  }
</style>
</head>
<body>

<div id="toolbar">
  <button id="pencilBtn">‚úèÔ∏è Dibujar</button>
  <button id="eraserBtn">ü©π Borrar</button>
  <input type="color" id="colorPicker" value="#000000" title="Color de pincel" />
  <button id="clearBtn">üßπ Limpiar todo</button>
  <input type="text" id="gifInput" placeholder="Pega URL GIF aqu√≠" />
  <button id="insertGifBtn">‚ûï Insertar GIF</button>
</div>

<canvas id="canvas" width="800" height="500"></canvas>

<script>
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');

  let drawing = false;
  let tool = 'pencil'; // pencil o eraser
  let color = '#000000';
  let lastX = 0;
  let lastY = 0;

  // Ajustar tama√±o responsivo
  function resizeCanvas() {
    // opcional: ajustar seg√∫n ventana, por ahora fijo 800x500
  }

  // Comenzar a dibujar
  canvas.addEventListener('pointerdown', (e) => {
    drawing = true;
    [lastX, lastY] = [e.offsetX, e.offsetY];
  });

  // Dibujar mientras se mueve el puntero
  canvas.addEventListener('pointermove', (e) => {
    if (!drawing) return;
    ctx.lineJoin = 'round';
    ctx.lineCap = 'round';
    ctx.lineWidth = tool === 'pencil' ? 4 : 20;
    ctx.strokeStyle = tool === 'pencil' ? color : '#ffffff';

    ctx.beginPath();
    ctx.moveTo(lastX, lastY);
    ctx.lineTo(e.offsetX, e.offsetY);
    ctx.stroke();
    [lastX, lastY] = [e.offsetX, e.offsetY];
  });

  // Terminar de dibujar
  canvas.addEventListener('pointerup', () => drawing = false);
  canvas.addEventListener('pointerout', () => drawing = false);

  // Cambiar herramienta a l√°piz
  document.getElementById('pencilBtn').onclick = () => {
    tool = 'pencil';
  };
  // Cambiar herramienta a borrador
  document.getElementById('eraserBtn').onclick = () => {
    tool = 'eraser';
  };
  // Cambiar color
  document.getElementById('colorPicker').oninput = (e) => {
    color = e.target.value;
  };
  // Limpiar todo
  document.getElementById('clearBtn').onclick = () => {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
  };

  // Insertar GIF en la posici√≥n central
  document.getElementById('insertGifBtn').onclick = () => {
    const url = document.getElementById('gifInput').value.trim();
    if (!url) return alert('Pega una URL v√°lida de GIF');

    const img = new Image();
    img.crossOrigin = "anonymous";
    img.onload = () => {
      // Insertar imagen en el centro del canvas
      const x = (canvas.width - img.width) / 2;
      const y = (canvas.height - img.height) / 2;
      ctx.drawImage(img, x, y, img.width, img.height);
      document.getElementById('gifInput').value = '';
    };
    img.onerror = () => alert('No se pudo cargar el GIF. Revisa la URL.');
    img.src = url;
  };

</script>

</body>
</html>
